/*!
 * multiscroll.js 0.2.2
 * https://github.com/alvarotrigo/multiscroll.js
 * @license MIT licensed
 *
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
!function(e,t,n,o,i){e.fn.multiscroll=function(s){var a=e.fn.multiscroll;s=e.extend({verticalCentered:!0,scrollingSpeed:700,easing:"easeInQuart",menu:!1,sectionsColor:[],anchors:[],navigation:!1,navigationPosition:"right",navigationColor:"#000",navigationTooltips:[],loopBottom:!1,loopTop:!1,css3:!1,paddingTop:0,paddingBottom:0,fixedElements:null,normalScrollElements:null,keyboardScrolling:!0,touchSensitivity:5,sectionSelector:".ms-section",leftSelector:".ms-left",rightSelector:".ms-right",afterLoad:null,onLeave:null,afterRender:null,afterResize:null},s);var l=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/),r="ontouchstart"in t||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints;".ms-right"!==s.rightSelector&&e(s.rightSelector).addClass("ms-right"),".ms-left"!==s.leftSelector&&e(s.leftSelector).addClass("ms-left");var c,m,d,v=e(".ms-left").find(".ms-section").length,f=!1,u=e(t).height(),h=function(){var e;e=t.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"};return e}(),p={touchmove:"ontouchmove"in t?"touchmove":h.move,touchstart:"ontouchstart"in t?"touchstart":h.down};function g(){var n=t.location.hash.replace("#","");if(n.length){var o=e(".ms-left").find('[data-anchor="'+n+'"]');("undefined"==typeof lastScrolledDestiny||n!==lastScrolledDestiny)&&E(o)}}function S(t){t.preventDefault();var n=e(this).parent().index();E(e(".ms-left .ms-section").eq(n))}function x(){var t=e(this).data("tooltip");e('<div class="multiscroll-tooltip '+s.navigationPosition+'">'+t+"</div>").hide().appendTo(e(this)).fadeIn(200)}function b(){e(this).find(".multiscroll-tooltip").fadeOut(200,(function(){e(this).remove()}))}L(),I(),s.css3&&(s.css3=function(){var e,o=n.createElement("p"),s={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var a in n.body.insertBefore(o,null),s)o.style[a]!==i&&(o.style[a]="translate3d(1px,1px,1px)",e=t.getComputedStyle(o).getPropertyValue(s[a]));return n.body.removeChild(o),e!==i&&e.length>0&&"none"!==e}()),e("html, body").css({overflow:"hidden",height:"100%"}),".ms-section"!==s.sectionSelector&&e(s.sectionSelector).each((function(){e(this).addClass("ms-section")})),s.navigation&&(e(".bdt-mltiscroll-slider").append('<div id="multiscroll-nav"><ul></ul></div>'),(c=e("#multiscroll-nav")).css("color",s.navigationColor),c.addClass(s.navigationPosition)),e(".ms-right, .ms-left").css({width:"50%",position:"absolute",height:"100%","-ms-touch-action":"none"}),e(".ms-right").css({right:"1px",top:"0","-ms-touch-action":"none","touch-action":"none"}),e(".ms-left").css({left:"0",top:"0","-ms-touch-action":"none","touch-action":"none"}),e(".ms-left .ms-section, .ms-right .ms-section").each((function(){var t,n=e(this).index();if((s.paddingTop||s.paddingBottom)&&e(this).css("padding",s.paddingTop+" 0 "+s.paddingBottom+" 0"),void 0!==s.sectionsColor[n]&&e(this).css("background-color",s.sectionsColor[n]),void 0!==s.anchors[n]&&e(this).attr("data-anchor",s.anchors[n]),s.verticalCentered&&(t=e(this)).addClass("ms-table").wrapInner('<div class="ms-tableCell" style="height: '+M(t)+'px" />'),e(this).closest(".ms-left").length&&s.navigation){var o="";s.anchors.length&&(o=s.anchors[n]);var i=s.navigationTooltips[n];void 0===i&&(i=""),s.navigation&&c.find("ul").append('<li data-tooltip="'+i+'"><a href="#'+o+'"><span></span></a></li>')}})),e(".ms-right").html(e(".ms-right").find(".ms-section").get().reverse()),e(".ms-left .ms-section, .ms-right .ms-section").each((function(){var t=e(this).index();e(this).css({height:"100%"}),!t&&s.navigation&&c.find("li").eq(t).find("a").addClass("active")})).promise().done((function(){e(".ms-left .ms-section.active").length||(e(".ms-right").find(".ms-section").last().addClass("active"),e(".ms-left").find(".ms-section").first().addClass("active")),s.navigation&&c.css("margin-top","-"+c.height()/2+"px"),e.isFunction(s.afterRender)&&s.afterRender.call(this),T(),D(),e(t).on("load",(function(){var n,o;n=t.location.hash.replace("#",""),o=e('.ms-left .ms-section[data-anchor="'+n+'"]'),n.length&&E(o)}))})),e(t).on("hashchange",g),e(n).keydown((function(t){clearTimeout(d);var o=e(n.activeElement);if(!o.is("textarea")&&!o.is("input")&&!o.is("select")&&s.keyboardScrolling){var i=t.which;e.inArray(i,[40,38,32,33,34])>-1&&t.preventDefault(),d=setTimeout((function(){!function(t){var n=t.shiftKey;switch(t.which){case 38:case 33:a.moveSectionUp();break;case 32:if(n){a.moveSectionUp();break}case 40:case 34:a.moveSectionDown();break;case 36:a.moveTo(1);break;case 35:a.moveTo(e(".ms-left .ms-section").length);break;default:;}}(t)}),150)}})),e(n).mousedown((function(e){if(1==e.button)return e.preventDefault(),!1})),e(n).on("click","#multiscroll-nav a",S),e(n).on({mouseenter:x,mouseleave:b},"#multiscroll-nav li"),s.normalScrollElements&&(e(n).on("mouseenter",s.normalScrollElements,(function(){a.setMouseWheelScrolling(!1)})),e(n).on("mouseleave",s.normalScrollElements,(function(){a.setMouseWheelScrolling(!0)}))),e(t).on("resize",y);var w=u;function y(){if(l){var i=e(n.activeElement);if(!i.is("textarea")&&!i.is("input")&&!i.is("select")){var s=e(t).height();o.abs(s-w)>20*o.max(w,s)/100&&(C(!0),w=s)}}else clearTimeout(m),m=setTimeout((function(){C(!0)}),350)}function C(n){u=e(t).height(),e(".ms-tableCell").each((function(){e(this).css({height:M(e(this).parent())})})),s.scrollOverflow&&scrollBarHandler.createScrollBarForAll(),T(),e.isFunction(s.afterResize)&&s.afterResize.call(this)}function T(){s.css3?(B(e(".ms-left"),"translate3d(0px, -"+e(".ms-left").find(".ms-section.active").position().top+"px, 0px)",!1),B(e(".ms-right"),"translate3d(0px, -"+e(".ms-right").find(".ms-section.active").position().top+"px, 0px)",!1)):(e(".ms-left").css("top",-e(".ms-left").find(".ms-section.active").position().top),e(".ms-right").css("top",-e(".ms-right").find(".ms-section.active").position().top))}function E(t){var n=t.index(),o=e(".ms-right").find(".ms-section").eq(v-1-n),i=t.data("anchor"),a=e(".ms-left .ms-section.active").index()+1,l=function(t){var n=e(".ms-left .ms-section.active").index(),o=t.index();if(n>o)return"up";return"down"}(t);f=!0;var r,c=t.position().top,m=o.position().top;if(o.addClass("active").siblings().removeClass("active"),t.addClass("active").siblings().removeClass("active"),function(e){s.anchors.length&&(location.hash=e);D()}(i),s.css3){e.isFunction(s.onLeave)&&s.onLeave.call(this,a,n+1,l);var d="translate3d(0px, -"+c+"px, 0px)",u="translate3d(0px, -"+m+"px, 0px)";B(e(".ms-left"),d,!0),B(e(".ms-right"),u,!0),setTimeout((function(){e.isFunction(s.afterLoad)&&s.afterLoad.call(this,i,n+1),setTimeout((function(){f=!1}),600)}),s.scrollingSpeed)}else e.isFunction(s.onLeave)&&s.onLeave.call(this,a,n+1,l),e(".ms-left").animate({top:-c},s.scrollingSpeed,s.easing,(function(){e.isFunction(s.afterLoad)&&s.afterLoad.call(this,i,n+1),setTimeout((function(){f=!1}),600)})),e(".ms-right").animate({top:-m},s.scrollingSpeed,s.easing);lastScrolledDestiny=i,r=i,s.menu&&(e(s.menu).find(".active").removeClass("active"),e(s.menu).find('[data-menuanchor="'+r+'"]').addClass("active")),function(t,n){s.navigation&&(e("#multiscroll-nav").find(".active").removeClass("active"),t?e("#multiscroll-nav").find('a[href="#'+t+'"]').addClass("active"):e("#multiscroll-nav").find("li").eq(n).find("a").addClass("active"))}(i,n)}function L(){n.addEventListener?(n.addEventListener("mousewheel",k,!1),n.addEventListener("wheel",k,!1)):n.attachEvent("onmousewheel",k)}function k(e){e=t.event||e;var n=o.max(-1,o.min(1,e.wheelDelta||-e.deltaY||-e.detail));return f||(n<0?a.moveSectionDown():a.moveSectionUp()),!1}function B(e,t,n){e.toggleClass("ms-easing",n),e.css(function(e){return{"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,transform:e}}(t))}function D(){var t=e(".ms-left .ms-section.active"),n=t.data("anchor"),o=t.index(),i=String(o);s.anchors.length&&(i=n),i=i.replace("/","-").replace("#","");var a=new RegExp("\\b\\s?ms-viewing-[^\\s]+\\b","g");e("body")[0].className=e("body")[0].className.replace(a,""),e("body").addClass("ms-viewing-"+i)}function M(e){var t=u;if(s.paddingTop||s.paddingBottom){var n=parseInt(e.css("padding-top"))+parseInt(e.css("padding-bottom"));t=u-n}return t}a.moveSectionUp=function(){var t=e(".ms-left .ms-section.active").prev(".ms-section");!t.length&&s.loopTop&&(t=e(".ms-left .ms-section").last()),t.length&&E(t)},a.moveSectionDown=function(){var t=e(".ms-left .ms-section.active").next(".ms-section");!t.length&&s.loopBottom&&(t=e(".ms-left .ms-section").first()),t.length&&E(t)},a.moveTo=function(t){E(isNaN(t)?e('.ms-left [data-anchor="'+t+'"]'):e(".ms-left .ms-section").eq(t-1))},a.setKeyboardScrolling=function(e){s.keyboardScrolling=e},a.setMouseWheelScrolling=function(e){e?L():n.addEventListener?(n.removeEventListener("mousewheel",k,!1),n.removeEventListener("wheel",k,!1)):n.detachEvent("onmousewheel",k)},a.setScrollingSpeed=function(e){s.scrollingSpeed=e};var P=0,z=0;function F(n){if(R(n)){event.preventDefault();e(".ms-left .ms-section.active");if(!f){var i=W(n);z=i.y,i.x,o.abs(P-z)>e(t).height()/100*s.touchSensitivity&&(P>z?a.moveSectionDown():z>P&&a.moveSectionUp())}}}function R(e){return void 0===e.pointerType||"mouse"!=e.pointerType}function Y(e){if(R(e)){var t=W(e);P=t.y,t.x}}function I(){(r||l)&&(n.removeEventListener(p.touchstart,Y),n.removeEventListener(p.touchmove,F,{passive:!1}),n.addEventListener(p.touchstart,Y),n.addEventListener(p.touchmove,F,{passive:!1}))}function W(e){var t=[];return t.y=void 0!==e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,t.x=void 0!==e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,r&&R(e)&&void 0!==e.touches&&(t.y=e.touches[0].pageY,t.x=e.touches[0].pageX),t}a.destroy=function(){a.setKeyboardScrolling(!1),a.setMouseWheelScrolling(!1),(r||l)&&(n.removeEventListener(p.touchstart,Y),n.removeEventListener(p.touchmove,F,{passive:!1})),e(t).off("hashchange",g).off("resize",y),e(n).off("mouseenter","#multiscroll-nav li").off("mouseleave","#multiscroll-nav li").off("click","#multiscroll-nav a")},a.build=function(){a.setKeyboardScrolling(!0),a.setMouseWheelScrolling(!0),I(),e(t).on("hashchange",g).on("resize",y),e(n).on("mouseenter","#multiscroll-nav li",x).on("mouseleave","#multiscroll-nav li",b).on("click","#multiscroll-nav a",S)}}}(jQuery,window,document,Math);